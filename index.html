<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È∫ªÈõÄÂ≠¶Âúí„Éê„Éà„É´„Çπ„Éà„Éº„É™„Éº</title>
    
    <!-- Noto Sans JP for Japanese text -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&family=Sawarabi+Mincho:wght@400&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- PapaParse for CSV handling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="src/css/main.css">
</head>
<body>
    <!-- Game Container -->
    <div id="game-container">
        
        <!-- Title Screen -->
        <div id="title-screen" class="screen active">
            <div class="title-background">
                <div class="title-content">
                    <h1 class="title-logo">
                        <span class="mahjong-symbol">üÄÑ</span>
                        <span class="title-main">È∫ªÈõÄÂ≠¶Âúí</span>
                        <span class="title-sub">„Éê„Éà„É´„Çπ„Éà„Éº„É™„Éº</span>
                    </h1>
                    
                    <div class="character-silhouettes">
                        <div class="silhouette" id="misaki-silhouette"></div>
                        <div class="silhouette" id="reina-silhouette"></div>
                        <div class="silhouette" id="yoh-silhouette"></div>
                    </div>
                    
                    <div class="menu-buttons">
                        <button class="menu-btn" id="start-game">„ÅØ„Åò„ÇÅ„Åã„Çâ</button>
                        <button class="menu-btn" id="continue-game">„Å§„Å•„Åç„Åã„Çâ</button>
                        <button class="menu-btn" id="gallery">„ÇÆ„É£„É©„É™„Éº</button>
                        <button class="menu-btn" id="settings">Ë®≠ÂÆö</button>
                    </div>
                </div>
                
                <div class="sakura-particles"></div>
            </div>
        </div>
        
        <!-- Dialogue Screen -->
        <div id="dialogue-screen" class="screen">
            <div class="dialogue-background">
                <div class="character-area">
                    <div id="character-image" class="character-image"></div>
                </div>
                
                <div class="dialogue-panel">
                    <div class="character-name" id="character-name"></div>
                    <div class="dialogue-text" id="dialogue-text"></div>
                </div>
                
                <div class="dialogue-controls">
                    <button class="control-btn" id="skip-btn">Skip</button>
                    <button class="control-btn" id="auto-btn">Auto</button>
                    <button class="control-btn" id="log-btn">Log</button>
                    <button class="control-btn" id="menu-btn">Menu</button>
                </div>
            </div>
        </div>
        
        <!-- Main Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-layout">
                <!-- Left Panel: Character Info -->
                <div class="character-panel">
                    <div class="character-display">
                        <div id="opponent-image" class="opponent-image"></div>
                        <div class="equipment-level">
                            <span>Ë£ÖÂÇôLv:</span>
                            <div class="level-stars" id="level-stars">
                                <span class="star">‚òÜ</span>
                                <span class="star">‚òÜ</span>
                                <span class="star">‚òÜ</span>
                                <span class="star">‚òÜ</span>
                                <span class="star">‚òÜ</span>
                            </div>
                        </div>
                        <div class="hp-bar">
                            <div class="hp-label">HP:</div>
                            <div class="hp-container">
                                <div class="hp-fill" id="hp-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right Panel: Mahjong Board -->
                <div class="game-board">
                    <div id="shanghai-board" class="shanghai-board">
                        <!-- Tiles will be dynamically generated -->
                    </div>
                    
                    <div class="game-hud">
                        <div class="score-info">
                            <span>„Çπ„Ç≥„Ç¢: <span id="current-score">0</span></span>
                            <span>ÊôÇÈñì: <span id="time-remaining">05:00</span></span>
                            <span>ÈÄ£Èéñ: x<span id="combo-count">1</span></span>
                        </div>
                        
                        <div class="game-controls">
                            <button class="game-btn" id="hint-btn">„Éí„É≥„Éà</button>
                            <button class="game-btn" id="undo-btn">‰∏ÄÊâãÊàª„Åô</button>
                            <button class="game-btn" id="shuffle-btn">„Ç∑„É£„ÉÉ„Éï„É´</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ending Screen -->
        <div id="ending-screen" class="screen">
            <div class="ending-background">
                <div class="ending-content">
                    <div class="ending-cg" id="ending-cg"></div>
                    
                    <div class="ending-info">
                        <div class="ending-title" id="ending-title">üèÜ TRUE ENDING üèÜ</div>
                        <div class="ending-subtitle" id="ending-subtitle">„ÄåÈ∫ªÈõÄÂ≠¶Âúí„ÅÆÊñ∞„Åü„Å™‰ºùË™¨„Äç</div>
                        
                        <div class="achievement-info">
                            <div class="achievement-stars">
                                ÈÅîÊàêÂ∫¶: <span id="achievement-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                            </div>
                            <div class="unlock-info">
                                Ëß£ÊîæË¶ÅÁ¥†: <span id="unlock-element">Èö†„Åó„Ç≠„É£„É©„ÇØ„Çø„Éº</span>
                            </div>
                        </div>
                        
                        <div class="ending-buttons">
                            <button class="ending-btn" id="to-title">„Çø„Ç§„Éà„É´„Å∏</button>
                            <button class="ending-btn" id="to-gallery">„ÇÆ„É£„É©„É™„Éº</button>
                            <button class="ending-btn" id="continue-playing">Á∂ö„Åë„Çã</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    
    <!-- Loading indicator -->
    <div id="loading" class="loading" style="display: none !important;">
        <div class="loading-spinner"></div>
        <div class="loading-text">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
    </div>
    
    <!-- Scripts -->
    <script src="Âº∑Âà∂ÂâäÈô§.js"></script>
    <script type="module" src="src/main.js"></script>
    <script src="‰øÆÂæ©.js"></script>
</body>
</html>